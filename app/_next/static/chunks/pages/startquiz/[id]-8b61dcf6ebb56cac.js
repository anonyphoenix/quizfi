(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[821],{75487:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/startquiz/[id]",function(){return i(9195)}])},9195:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return D}});var n=i(11527),s=i(98137),r=i(62764),l=i(9532),o=i(50959),a=i(42884);let d=e=>{let t=(0,a.I0)(),[i,n]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{async function i(){try{n(!0);let i=await l.Z.get("/api/get-quiz-by-id-test?id=".concat(e)),s=i.data;t((0,r.zU)(s)),t((0,r.ZR)(s.questions[0])),n(!1)}catch(e){t((0,s.wN)({type:"error",message:"An error occurred while fetching quizzes"})),n(!1),console.error(e)}}e&&i()},[e,t]),i},u=()=>{(0,o.useEffect)(()=>{let e=e=>{e.preventDefault();let t="Are you sure you want to leave this page? Your quiz data will be lost.";return e.returnValue=t,t};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}},[])};var c=i(84449);let x=()=>{let e=(0,c.useRouter)();(0,o.useEffect)(()=>{let t=(t,i)=>{let{shallow:n}=i;if(!n&&!t.includes("/result")&&!confirm("Are you sure you want to leave this page? Your quiz data will be lost."))throw e.events.emit("routeChangeError"),"routeChange aborted."};return e.events.on("routeChangeStart",t),()=>{e.events.off("routeChangeStart",t)}},[e])};var h=i(28822),m=i(51029),f=i(72708),p=i(9401),j=i(20057),y=i(252),g=i(73389),v=i(25715),Z=i(56563),w=i(58545),b=i(73825),q=i(47569),z=function(){var e;let t=(0,c.useRouter)(),i=(0,a.v9)(e=>e.quizTestData.quiz),s=t.query.id,l=(0,a.v9)(e=>e.quizTestData.currentQuestion),z=(0,a.I0)();(0,o.useEffect)(()=>(z((0,h.Rx)("quiz_take")),()=>{z((0,h.jC)()),z((0,r.ZR)(null))}),[z]);let T=i.questions.findIndex(e=>e.id===(null==l?void 0:l.id))+1,D=i.questions.reduce((e,t)=>t.options.some(e=>e.isAnswer)?e+1:e,0),A=(null===(e=i.questions[T-1])||void 0===e?void 0:e.points)||1,E=d(s);x(),u();let C=(e,t)=>{z((0,r.zc)({questionId:e.id,answerId:t}))},S=()=>{z((0,r.VE)())},_=()=>{z((0,r.F$)())};return E?(0,n.jsx)(m.Z,{mt:4,style:{display:"flex",justifyContent:"center"},children:(0,n.jsx)(f.Z,{color:"primary"})}):(0,n.jsxs)(m.Z,{sx:{mt:4,width:"100%"},children:[(0,n.jsxs)(p.Z,{variant:"h4",gutterBottom:!0,children:["Quiz Title â€” ",i.title]}),l&&(0,n.jsxs)(j.Z,{sx:{p:4},children:[(0,n.jsxs)(y.Z,{children:[(0,n.jsxs)(p.Z,{variant:"body1",sx:{fontWeight:"bold"},children:["Question ",T,"/",i.questions.length]}),(0,n.jsx)(p.Z,{variant:"body1",sx:{ml:0},children:l.prompt}),(0,n.jsxs)(p.Z,{variant:"body2",sx:{mt:2},children:[A," ",A>1?"points":"point"]}),(0,n.jsx)(g.Z,{component:"fieldset",sx:{mt:2},children:(0,n.jsx)(v.Z,{name:"question-".concat(l.id),children:l.options.map(e=>(0,n.jsx)(Z.Z,{value:e.id,control:(0,n.jsx)(w.Z,{}),label:e.title,checked:e.isAnswer,onClick:()=>C(l,e.id)},e.id))})})]}),(0,n.jsxs)(b.Z,{sx:{justifyContent:"flex-end"},children:[(0,n.jsxs)(p.Z,{variant:"body2",sx:{mr:2},children:[D," out of ",i.questions.length," questions attempted"]}),(0,n.jsx)(q.Z,{variant:"contained",color:"primary",disabled:T-1==0,onClick:S,children:"Previous"}),(0,n.jsx)(q.Z,{variant:"contained",color:"primary",disabled:T===i.questions.length,onClick:_,sx:{ml:2},children:"Next"})]})]})]})},T=i(59496),D=function(){let e=(0,c.useRouter)(),[t,i]=(0,o.useState)(!1),[s,r]=(0,o.useState)(!1),[a,d]=(0,o.useState)(!1),[u,x]=(0,o.useState)(!1),[h,y]=(0,o.useState)({id:"",title:"",description:"",points:1,timelimit:0,startTime:new Date}),g=e.query.id,v=()=>{h&&h.startTime&&h.timelimit&&new Date(h.startTime)>new Date&&d(!0)},Z=()=>{h&&h.startTime&&h.timelimit&&new Date(h.startTime)<new Date(new Date().getTime()-6e4*h.timelimit)&&r(!0)},w=()=>{h&&h.startTime&&h.timelimit&&new Date(h.startTime)<new Date&&new Date<new Date(new Date(h.startTime).getTime()+6e4*h.timelimit)&&i(!0)};return((0,o.useEffect)(()=>{async function t(){try{x(!0);let e=await l.Z.get("/api/get-quiz-by-id-pre-test?id=".concat(g));x(!1);let t=e.data;y(t)}catch(t){x(!1),e.push("/404")}}g&&t()},[g,e]),(0,o.useEffect)(()=>{v(),Z();let e=setInterval(()=>{v(),Z()},1e4);return()=>{clearInterval(e)}}),t)?(0,n.jsx)(z,{}):(0,n.jsx)(m.Z,{sx:{mt:8,display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center"},children:(0,n.jsx)(j.Z,{sx:{p:4},children:u?(0,n.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,n.jsx)(f.Z,{color:"primary"})}):(0,n.jsxs)(n.Fragment,{children:[" ",(0,n.jsx)(p.Z,{variant:"h4",fontWeight:"bold",gutterBottom:!0,children:h.title}),(0,n.jsx)(T.Z,{sx:{width:"100%",mb:2}}),(0,n.jsxs)(m.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"flex-start",p:2},children:[(0,n.jsxs)(p.Z,{variant:"body1",textAlign:"left",children:[(0,n.jsx)(m.Z,{fontWeight:"bold",component:"span",children:"Quiz Description:"})," ",h.description]}),(0,n.jsxs)(p.Z,{variant:"body1",textAlign:"left",children:[(0,n.jsx)(m.Z,{fontWeight:"bold",component:"span",children:"Start time:"})," ",h.startTime&&new Date(h.startTime).toLocaleString("en-US")]}),(0,n.jsxs)(p.Z,{variant:"body1",textAlign:"left",children:[(0,n.jsx)(m.Z,{fontWeight:"bold",component:"span",children:"Time Limit:"})," ",h.timelimit," minutes"]}),(0,n.jsxs)(p.Z,{variant:"body1",textAlign:"left",children:[(0,n.jsx)(m.Z,{fontWeight:"bold",component:"span",children:"Total Points:"})," ",h.points]}),(0,n.jsx)(p.Z,{variant:"body1",sx:{mt:2},textAlign:"left",children:(0,n.jsx)(m.Z,{fontWeight:"bold",component:"span",children:"Instructions:"})}),(0,n.jsx)(p.Z,{variant:"body1",color:"red",textAlign:"left",children:"- Once you press Start Quiz, the quiz will begin."}),(0,n.jsxs)(p.Z,{variant:"body1",color:"red",textAlign:"left",children:["- You will have ",h.timelimit," minutes to complete the quiz."]}),(0,n.jsx)(p.Z,{variant:"body1",color:"red",textAlign:"left",children:"- Press Submit to end the test and see your results."}),(0,n.jsx)(p.Z,{variant:"body1",color:"red",textAlign:"left",children:"- The quiz will end automatically when the time is up."}),(0,n.jsx)(q.Z,{disabled:a||s,variant:"contained",size:"large",color:"primary",onClick:w,sx:{mt:2},children:a||s?a?"Quiz has not started yet":"Quiz has finished":"Start Quiz"})]})]})})})}}},function(e){e.O(0,[786,39,774,888,179],function(){return e(e.s=75487)}),_N_E=e.O()}]);